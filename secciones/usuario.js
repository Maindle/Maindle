// JavaScript reconstruido con control de flujo, validaciones y almacenamiento localStorage corregido